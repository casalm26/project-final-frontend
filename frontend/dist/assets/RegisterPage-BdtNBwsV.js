import{j as r,d as c,r as l,u as b,L as x}from"./index-eAO8Bxia.js";import{F as u,P as h}from"./PasswordInput-gOFjM93D.js";import"./vendor-BtP0CW_r.js";const j=c.div`
  width: 100%;
  height: 4px;
  background-color: #e5e7eb;
  border-radius: 2px;
  overflow: hidden;
  margin-top: 0.5rem;
`,y=c.div`
  height: 100%;
  background-color: ${e=>e.strength==="weak"?"#ef4444":e.strength==="medium"?"#f59e0b":e.strength==="strong"?"#10b981":"#e5e7eb"};
  width: ${e=>e.strength==="weak"?"33%":e.strength==="medium"?"66%":e.strength==="strong"?"100%":"0%"};
  transition: all 0.3s ease;
`,P=e=>{switch(e){case"weak":return"Weak password";case"medium":return"Medium strength password";case"strong":return"Strong password";default:return""}},v=({strength:e,show:s})=>s?r.jsxs("div",{className:"mt-2",children:[r.jsx(j,{children:r.jsx(y,{strength:e})}),r.jsx("p",{className:`text-xs mt-1 ${e==="weak"?"text-red-600":e==="medium"?"text-yellow-600":e==="strong"?"text-green-600":"text-gray-500"}`,children:P(e)})]}):null,N=e=>l.useMemo(()=>{if(!e)return{strength:"none",score:0};let s=0;return e.length>=8&&(s+=1),/[a-z]/.test(e)&&(s+=1),/[A-Z]/.test(e)&&(s+=1),/[0-9]/.test(e)&&(s+=1),/[^A-Za-z0-9]/.test(e)&&(s+=1),s<=2?{strength:"weak",score:s}:s<=3?{strength:"medium",score:s}:{strength:"strong",score:s}},[e]),S=()=>{const[e,s]=l.useState({email:"",password:"",confirmPassword:""}),[a,o]=l.useState({}),[i,d]=l.useState(!1),{register:f}=b(),g=N(e.password),w=()=>{const t={};return e.email?/\S+@\S+\.\S+/.test(e.email)||(t.email="Email is invalid"):t.email="Email is required",e.password?e.password.length<6?t.password="Password must be at least 6 characters":g.strength==="weak"&&(t.password="Password is too weak. Include uppercase, lowercase, numbers, and special characters."):t.password="Password is required",e.confirmPassword?e.password!==e.confirmPassword&&(t.confirmPassword="Passwords do not match"):t.confirmPassword="Please confirm your password",o(t),Object.keys(t).length===0};return{formData:e,errors:a,isSubmitting:i,passwordStrength:g,handleInputChange:t=>{const{name:n,value:p}=t.target;s(m=>({...m,[n]:p})),a[n]&&o(m=>({...m,[n]:""}))},handleSubmit:async t=>{if(t.preventDefault(),!!w()){d(!0);try{const n=await f(e.email,e.password,e.confirmPassword);n.success||o({general:n.error})}catch{o({general:"An unexpected error occurred. Please try again."})}finally{d(!1)}}}}},k=()=>{const{formData:e,errors:s,isSubmitting:a,passwordStrength:o,handleInputChange:i,handleSubmit:d}=S();return r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[s.general&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:s.general}),r.jsx(u,{label:"Email address",id:"email",error:s.email,required:!0,children:r.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:i,className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent ${s.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter your email",disabled:a})}),r.jsxs(u,{label:"Password",id:"password",error:s.password,required:!0,children:[r.jsx(h,{id:"password",name:"password",value:e.password,onChange:i,error:s.password,placeholder:"Create a strong password",disabled:a}),r.jsx(v,{strength:o.strength,show:e.password.length>0})]}),r.jsx(u,{label:"Confirm password",id:"confirmPassword",error:s.confirmPassword,required:!0,children:r.jsx(h,{id:"confirmPassword",name:"confirmPassword",value:e.confirmPassword,onChange:i,error:s.confirmPassword,placeholder:"Confirm your password",disabled:a})}),r.jsx(C,{disabled:a}),r.jsx(F,{isSubmitting:a}),r.jsx(I,{})]})},C=({disabled:e})=>r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"terms",name:"terms",type:"checkbox",required:!0,className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded",disabled:e}),r.jsxs("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-900",children:["I agree to the"," ",r.jsx("a",{href:"#",className:"font-medium text-green-600 hover:text-green-500",children:"Terms of Service"})," ","and"," ",r.jsx("a",{href:"#",className:"font-medium text-green-600 hover:text-green-500",children:"Privacy Policy"})]})]}),F=({isSubmitting:e})=>r.jsx("button",{type:"submit",disabled:e,className:"w-full flex justify-center py-2 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-green-600 hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 disabled:opacity-50 disabled:cursor-not-allowed",children:e?r.jsxs("div",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating account..."]}):"Create account"}),I=()=>r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",r.jsx(x,{to:"/login",className:"font-medium text-green-600 hover:text-green-500",children:"Sign in"})]})}),E=c.div`
  min-height: 100vh;
  background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 100%);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 1rem;
`,R=c.div`
  background: white;
  border-radius: 1rem;
  box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  padding: 2rem;
  width: 100%;
  max-width: 450px;
`,M=()=>r.jsx(E,{children:r.jsxs(R,{children:[r.jsx(q,{}),r.jsx(k,{})]})}),q=()=>r.jsxs("div",{className:"text-center mb-8",children:[r.jsx(x,{to:"/",className:"inline-block mb-6",children:r.jsx("h1",{className:"text-3xl font-bold text-green-600",children:"Nanwa"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Create your account"}),r.jsx("p",{className:"text-gray-600",children:"Join Nanwa to start monitoring your trees"})]});export{M as RegisterPage};
