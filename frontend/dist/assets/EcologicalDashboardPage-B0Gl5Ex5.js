import{r as v,j as e,b as J,L as Y}from"./index-tEqMizXb.js";import{C,a as I,b as L}from"./ChartComponents-BKyCVLLP.js";import{a2 as Z,a3 as _,R as q,a as G,X as V,Y as O,T as X,b as Q,B as ee,d as M,L as ae,e as te,E as se}from"./EnhancedStatCard-CVgqadrW.js";import{A as re,a as R,u as ne}from"./useDashboardStats-3Mt6zhuV.js";import{G as ie}from"./GlobalFilters-B5C4gkva.js";import{u as oe,D as de,a as le}from"./useSidebarState-CJJaSDFr.js";import"./vendor-BtP0CW_r.js";import"./DarkModeToggle-ZfYhBz0e.js";import"./IconButton-DmJ5sToe.js";var ce=["axis"],he=v.forwardRef((S,h)=>v.createElement(Z,{chartName:"ComposedChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ce,tooltipPayloadSearcher:_,categoricalChartProps:S,ref:h}));const $=({filters:S={},chartType:h="line"})=>{const[k,u]=v.useState([]),[W,x]=v.useState(!0),[F,E]=v.useState(null);v.useEffect(()=>{(async()=>{var s,c,i;try{x(!0),E(null);const r=(await te.getStats(S)).data,l=(s=r==null?void 0:r.manager)==null?void 0:s.biodiversity,o=(c=r==null?void 0:r.manager)==null?void 0:c.speciesDiversity,xe=(i=r==null?void 0:r.manager)==null?void 0:i.soilHealth;if(h==="area"){const A=new Date().getFullYear(),j=[];for(let d=-6;d<=0;d++){const b=A+d,a=(6+d)/6,n=(o==null?void 0:o.uniqueSpecies)||25,w=(o==null?void 0:o.endangeredSpecies)||3,y=Math.round(n*.15*a*(.8+Math.random()*.4)),m=Math.round(n*.35*a*(.9+Math.random()*.2)),f=Math.round(n*.3*a*(1+Math.random()*.3)),g=Math.round(n*.2*a*(.85+Math.random()*.3)),N=Math.max(0,Math.round(w*(1.2-a*.4))),D=Math.round(n*.1*a),H=y+m+f+g-N-D;j.push({year:b,yearLabel:b.toString(),mammals:y,birds:m,insects:f,plants:g,endangered:N,vulnerable:D,stable:Math.max(0,H),totalSpecies:y+m+f+g,biodiversityIndex:Math.round(((l==null?void 0:l.averageIndex)||5)*a*10)/10,endemicSpecies:Math.round(n*.05*a),newSpeciesDiscovered:Math.floor(Math.random()*3)+(d===0?1:0)})}u(j)}else if(h==="composed"){const A=new Date().getFullYear(),j=[];for(let d=-5;d<=0;d++){const b=A+d,a=(5+d)/5,n=Math.round((((l==null?void 0:l.averageIndex)||2.5)*a+(Math.random()-.5)*.3)*10)/10,w=Math.round((.8*a+(Math.random()-.5)*.1)*100)/100,y=Math.round(((o==null?void 0:o.uniqueSpecies)||20)*a*(.9+Math.random()*.2)),m=Math.round((.7+a*.2+(Math.random()-.5)*.1)*100)/100,f=Math.round(60+a*30+Math.random()*10),g=Math.round(50+a*40+(Math.random()-.5)*10),N=Math.max(0,Math.round(8-a*5+(Math.random()-.5)*2));j.push({year:b,yearLabel:b.toString(),shannonIndex:n,simpsonIndex:Math.round(w*100),speciesRichness:y,evenness:Math.round(m*100),connectivity:f,habitatQuality:g,invasiveSpecies:N,overallBiodiversityScore:Math.round((n*10+y/2+f+g)/4)})}u(j)}else{const A=new Date().getFullYear(),j=[];for(let d=-7;d<=0;d++){const b=A+d,a=(7+d)/7,n=Math.round(((o==null?void 0:o.uniqueSpecies)||25)*a*(.9+Math.random()*.2)),w=Math.max(0,Math.round(((o==null?void 0:o.endangeredSpecies)||5)*(1.3-a*.5))),y=Math.round(((l==null?void 0:l.averageIndex)||3)*a*10+Math.random()*5)/10,m=Math.round(n*(.85+a*.1)),f=n-m,g=Math.round(100*a*(.8+Math.random()*.4)),N=Math.round(80*a*(.9+Math.random()*.2)),D=Math.round(120*a*(.85+Math.random()*.3)),H=Math.round(50+a*40+(Math.random()-.5)*10),U=Math.round((.65+a*.2+(Math.random()-.5)*.05)*100);j.push({year:b,yearLabel:b.toString(),totalSpecies:n,endangeredSpecies:w,biodiversityIndex:y,nativeSpecies:m,nonNativeSpecies:f,pollinatorPopulation:g,predatorPopulation:N,herbivorePopulation:D,connectivityIndex:H,geneticDiversity:U,nativeRatio:Math.round(m/n*100),populationHealthIndex:Math.round((g+N+D)/3),conservationEffectiveness:Math.round((n-w)/n*100)})}u(j)}}catch(p){console.error("Error fetching biodiversity trends data:",p),E(p.message||"Failed to load biodiversity data")}finally{x(!1)}})()},[S,h]);const T=t=>t?t.toLocaleString():"0",K=t=>t?t.toFixed(1):"0.0",P=t=>t?`${Math.round(t)}%`:"0%",B=({active:t,payload:s,label:c})=>t&&s&&s.length?(s[0].payload,e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:c}),e.jsx("div",{className:"space-y-1",children:s.map((i,p)=>e.jsxs("p",{className:"text-sm",style:{color:i.color},children:[i.name,": ",i.name.includes("Index")||i.name.includes("index")?K(i.value):i.name.includes("%")||i.name.includes("Ratio")||i.name.includes("Effectiveness")?P(i.value):T(i.value)]},p))})]})):null,z=({active:t,payload:s,label:c})=>{if(t&&s&&s.length){const i=s[0].payload,p=s.reduce((r,l)=>r+l.value,0);return e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white mb-2",children:c}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"text-sm font-medium text-green-600 dark:text-green-400",children:["Total Species: ",T(p)]}),s.map((r,l)=>e.jsxs("p",{className:"text-sm",style:{color:r.color},children:[r.name,": ",T(r.value)," (",(r.value/p*100).toFixed(0),"%)"]},l)),e.jsx("div",{className:"border-t pt-1 mt-1",children:e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Biodiversity Index: ",K(i.biodiversityIndex)]})})]})]})}return null};return W?e.jsxs(C,{children:[e.jsx(I,{children:e.jsx(L,{children:"Biodiversity Trends"})}),e.jsx("div",{className:"flex justify-center items-center h-72",children:e.jsx(J,{size:"32px",text:"Loading biodiversity data..."})})]}):F?e.jsxs(C,{children:[e.jsx(I,{children:e.jsx(L,{children:"Biodiversity Trends"})}),e.jsx("div",{className:"flex justify-center items-center h-72",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-2",children:"Error loading chart data"}),e.jsx("p",{className:"text-sm text-gray-500",children:F})]})})]}):!k||k.length===0?e.jsxs(C,{children:[e.jsx(I,{children:e.jsx(L,{children:"Biodiversity Trends"})}),e.jsx("div",{className:"flex justify-center items-center h-72",children:e.jsx("p",{className:"text-gray-500",children:"No biodiversity data available"})})]}):h==="area"?e.jsxs(C,{children:[e.jsxs(I,{children:[e.jsx(L,{children:"Species Composition Trends"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Evolution of species diversity by taxonomic groups"})]}),e.jsx(q,{width:"100%",height:300,children:e.jsxs(re,{data:k,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(G,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(V,{dataKey:"yearLabel",className:"text-xs",tick:{fontSize:12}}),e.jsx(O,{className:"text-xs",tick:{fontSize:12}}),e.jsx(X,{content:e.jsx(z,{})}),e.jsx(Q,{}),e.jsx(R,{type:"monotone",dataKey:"plants",stackId:"1",stroke:"#10b981",fill:"#10b981",name:"Plants",fillOpacity:.8}),e.jsx(R,{type:"monotone",dataKey:"insects",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b",name:"Insects",fillOpacity:.8}),e.jsx(R,{type:"monotone",dataKey:"birds",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",name:"Birds",fillOpacity:.8}),e.jsx(R,{type:"monotone",dataKey:"mammals",stackId:"1",stroke:"#8b5cf6",fill:"#8b5cf6",name:"Mammals",fillOpacity:.8})]})})]}):h==="composed"?e.jsxs(C,{children:[e.jsxs(I,{children:[e.jsx(L,{children:"Biodiversity Metrics Dashboard"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Comprehensive biodiversity health indicators"})]}),e.jsx(q,{width:"100%",height:300,children:e.jsxs(he,{data:k,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(G,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(V,{dataKey:"yearLabel",className:"text-xs",tick:{fontSize:12}}),e.jsx(O,{yAxisId:"left",className:"text-xs",tick:{fontSize:12}}),e.jsx(O,{yAxisId:"right",orientation:"right",className:"text-xs",tick:{fontSize:12}}),e.jsx(X,{content:e.jsx(B,{})}),e.jsx(Q,{}),e.jsx(ee,{yAxisId:"left",dataKey:"speciesRichness",fill:"#e5e7eb",name:"Species Richness",opacity:.6}),e.jsx(M,{yAxisId:"right",type:"monotone",dataKey:"shannonIndex",stroke:"#10b981",strokeWidth:3,name:"Shannon Index",dot:{r:4,fill:"#10b981"}}),e.jsx(M,{yAxisId:"right",type:"monotone",dataKey:"connectivity",stroke:"#3b82f6",strokeWidth:2,name:"Habitat Connectivity",dot:{r:3,fill:"#3b82f6"}}),e.jsx(M,{yAxisId:"left",type:"monotone",dataKey:"invasiveSpecies",stroke:"#ef4444",strokeWidth:2,name:"Invasive Species",dot:{r:3,fill:"#ef4444"},strokeDasharray:"5 5"})]})})]}):e.jsxs(C,{children:[e.jsxs(I,{children:[e.jsx(L,{children:"Biodiversity Trends Over Time"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Long-term trends in species diversity and conservation status"})]}),e.jsx(q,{width:"100%",height:300,children:e.jsxs(ae,{data:k,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(G,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(V,{dataKey:"yearLabel",className:"text-xs",tick:{fontSize:12}}),e.jsx(O,{className:"text-xs",tick:{fontSize:12}}),e.jsx(X,{content:e.jsx(B,{})}),e.jsx(Q,{}),e.jsx(M,{type:"monotone",dataKey:"totalSpecies",stroke:"#10b981",strokeWidth:3,name:"Total Species",dot:{r:4,fill:"#10b981"}}),e.jsx(M,{type:"monotone",dataKey:"nativeSpecies",stroke:"#3b82f6",strokeWidth:2,name:"Native Species",dot:{r:3,fill:"#3b82f6"}}),e.jsx(M,{type:"monotone",dataKey:"endangeredSpecies",stroke:"#ef4444",strokeWidth:2,name:"Endangered Species",dot:{r:3,fill:"#ef4444"},strokeDasharray:"5 5"}),e.jsx(M,{type:"monotone",dataKey:"biodiversityIndex",stroke:"#8b5cf6",strokeWidth:2,name:"Biodiversity Index",dot:{r:3,fill:"#8b5cf6"}})]})})]})},ke=()=>{var B,z,t,s;const{sidebarOpen:S,toggleSidebar:h,closeSidebar:k}=oe(),[u,W]=v.useState({}),{stats:x,loading:F,error:E,refresh:T}=ne(u),K=v.useCallback(c=>{W(c)},[]),P=c=>c.toLocaleString();return e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-900 flex flex-col",children:[e.jsx(de,{onToggleSidebar:h}),e.jsx(le,{isOpen:S,onClose:k}),e.jsx("main",{className:"flex-1 p-4 md:p-6 lg:p-8 lg:ml-64",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsxs("div",{children:[e.jsx("nav",{className:"flex mb-2","aria-label":"Breadcrumb",children:e.jsxs("ol",{className:"flex items-center space-x-4",children:[e.jsx("li",{children:e.jsx(Y,{to:"/dashboard",className:"text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300",children:"Overview"})}),e.jsx("li",{children:e.jsx("svg",{className:"flex-shrink-0 h-4 w-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20","aria-hidden":"true",children:e.jsx("path",{d:"M5.555 17.776l8-16 .894.448-8 16-.894-.448z"})})}),e.jsx("li",{children:e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Ecological Dashboard"})})]})}),e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white mb-2",children:"Ecological Dashboard"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Environmental impact, biodiversity tracking, and conservation metrics for sustainable forest management."})]})})}),e.jsx(ie,{onFiltersChange:K}),F?e.jsx("div",{className:"flex justify-center items-center py-12",children:e.jsx(J,{text:"Loading ecological data..."})}):E?e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-8",children:[e.jsxs("p",{className:"text-red-600",children:["Error loading ecological statistics: ",E]}),e.jsx("button",{onClick:T,className:"mt-2 text-red-600 hover:text-red-800 underline",children:"Try again"})]}):e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Forest Health Metrics"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.jsx(se,{icon:e.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),title:"Number of Species",value:P(((z=(B=x==null?void 0:x.manager)==null?void 0:B.biodiversity)==null?void 0:z.totalSpecies)||((s=(t=x==null?void 0:x.ecological)==null?void 0:t.biodiversity)==null?void 0:s.speciesCount)||10),subtitle:"Different tree species in the system",color:"purple"})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Biodiversity Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"col-span-1",children:e.jsx($,{filters:u,chartType:"line"})}),e.jsx("div",{className:"col-span-1",children:e.jsx($,{filters:u,chartType:"area"})}),e.jsx("div",{className:"col-span-1 lg:col-span-2",children:e.jsx($,{filters:u,chartType:"composed"})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Related Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(Y,{to:"/dashboard",className:"block",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 p-6 border border-gray-200 dark:border-gray-700 hover:border-gray-300 dark:hover:border-gray-600",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"p-2 bg-gray-100 dark:bg-gray-700 rounded-lg mr-4",children:e.jsx("svg",{className:"h-5 w-5 text-gray-600 dark:text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Overview Dashboard"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Return to the main overview for quick insights across all metrics."})]})}),e.jsx(Y,{to:"/dashboard/financial",className:"block",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-shadow duration-200 p-6 border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-600",children:[e.jsxs("div",{className:"flex items-center mb-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 dark:bg-blue-900 rounded-lg mr-4",children:e.jsx("svg",{className:"h-5 w-5 text-blue-600 dark:text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 dark:text-white",children:"Financial Dashboard"})]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Explore the financial implications of your conservation efforts and environmental performance."})]})})]})]})]})})]})};export{ke as EcologicalDashboardPage};
