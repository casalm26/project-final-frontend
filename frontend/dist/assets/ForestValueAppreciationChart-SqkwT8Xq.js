import{r as n,j as e,b as $}from"./index-Bdj1OuIn.js";import{C as l,a as c,b as u}from"./ChartComponents-Dl9MwPMh.js";import{R as I,f as W,b as X,X as G,Y as H,T as P,L as B,g as K,h as J}from"./useTreeData-610ECvDS.js";const U=({filters:h={}})=>{const[d,T]=n.useState([]),[z,p]=n.useState(!0),[f,j]=n.useState(null);n.useEffect(()=>{(async()=>{var r,a,o,s,C,g,v,V,y,A,N,b,k,q,F,S,E,D,L,w;try{p(!0),j(null);const t=(await J.getStats(h)).data,Y=[{period:"2020",currentValue:(((a=(r=t==null?void 0:t.investor)==null?void 0:r.portfolio)==null?void 0:a.totalCurrentValue)||0)*.7,acquisitionCost:((s=(o=t==null?void 0:t.investor)==null?void 0:o.portfolio)==null?void 0:s.totalAcquisitionCost)||0},{period:"2021",currentValue:(((g=(C=t==null?void 0:t.investor)==null?void 0:C.portfolio)==null?void 0:g.totalCurrentValue)||0)*.8,acquisitionCost:((V=(v=t==null?void 0:t.investor)==null?void 0:v.portfolio)==null?void 0:V.totalAcquisitionCost)||0},{period:"2022",currentValue:(((A=(y=t==null?void 0:t.investor)==null?void 0:y.portfolio)==null?void 0:A.totalCurrentValue)||0)*.9,acquisitionCost:((b=(N=t==null?void 0:t.investor)==null?void 0:N.portfolio)==null?void 0:b.totalAcquisitionCost)||0},{period:"2023",currentValue:(((q=(k=t==null?void 0:t.investor)==null?void 0:k.portfolio)==null?void 0:q.totalCurrentValue)||0)*.95,acquisitionCost:((S=(F=t==null?void 0:t.investor)==null?void 0:F.portfolio)==null?void 0:S.totalAcquisitionCost)||0},{period:"2024",currentValue:((D=(E=t==null?void 0:t.investor)==null?void 0:E.portfolio)==null?void 0:D.totalCurrentValue)||0,acquisitionCost:((w=(L=t==null?void 0:t.investor)==null?void 0:L.portfolio)==null?void 0:w.totalAcquisitionCost)||0}];T(Y)}catch(m){console.error("Error fetching forest value data:",m),j(m.message||"Failed to load forest value data")}finally{p(!1)}})()},[h]);const x=i=>i?new Intl.NumberFormat("sv-SE",{style:"currency",currency:"SEK",minimumFractionDigits:0,maximumFractionDigits:0}).format(i):"0",R=({active:i,payload:r,label:a})=>i&&r&&r.length?e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:`Year: ${a}`}),r.map((o,s)=>e.jsx("p",{className:"text-sm",style:{color:o.color},children:`${o.dataKey==="currentValue"?"Current Value":"Acquisition Cost"}: ${x(o.value)}`},s)),r.length===2&&e.jsxs("p",{className:"text-sm font-medium text-green-600 dark:text-green-400 mt-1",children:["Appreciation: ",x(r[0].value-r[1].value)]})]}):null;return z?e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(u,{children:"Forest Value Appreciation"})}),e.jsx("div",{className:"flex justify-center items-center h-72",children:e.jsx($,{size:"32px",text:"Loading value data..."})})]}):f?e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(u,{children:"Forest Value Appreciation"})}),e.jsx("div",{className:"flex justify-center items-center h-72",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-red-600 mb-2",children:"Error loading chart data"}),e.jsx("p",{className:"text-sm text-gray-500",children:f})]})})]}):!d||d.length===0?e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(u,{children:"Forest Value Appreciation"})}),e.jsx("div",{className:"flex justify-center items-center h-72",children:e.jsx("p",{className:"text-gray-500",children:"No forest value data available"})})]}):e.jsxs(l,{children:[e.jsx(c,{children:e.jsx(u,{children:"Forest Value Appreciation"})}),e.jsx(I,{width:"100%",height:300,children:e.jsxs(W,{data:d,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(X,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(G,{dataKey:"period",className:"text-xs",tick:{fontSize:12}}),e.jsx(H,{className:"text-xs",tick:{fontSize:12},tickFormatter:x}),e.jsx(P,{content:e.jsx(R,{})}),e.jsx(B,{}),e.jsx(K,{type:"monotone",dataKey:"acquisitionCost",stroke:"#8b5cf6",strokeWidth:2,name:"Acquisition Cost",dot:{r:4}}),e.jsx(K,{type:"monotone",dataKey:"currentValue",stroke:"#10b981",strokeWidth:2,name:"Current Value",dot:{r:4}})]})})]})};export{U as F};
